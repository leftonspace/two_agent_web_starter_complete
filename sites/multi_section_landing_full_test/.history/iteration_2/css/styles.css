/*
LoopPilot UI — mobile-first, accessible, light/dark, minimal CLS
*/
:root {
  /* Color tokens (defaults; overridden by color-scheme prefs) */
  --bg: #ffffff;
  --surface: #ffffff;
  --elev: #ffffff;
  --text: #0b1220;
  --muted: #5b6476;
  --border: #e7e9ee;
  /* Brand tokens */
  --brand: #2563eb;            /* accent for links, outlines */
  --brand-strong: #2563eb;     /* solid surfaces like primary buttons */
  --brand-strong-hover: #1d4ed8;
  --brand-50: #eef2ff;         /* subtle tints */
  --on-brand: #ffffff;         /* text on brand solid */
  --success: #16a34a;

  /* Typography */
  --font-sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  --fs-sm: 0.9375rem;
  --fs-base: 1rem;
  --fs-md: 1.125rem;
  --fs-lg: clamp(1.25rem, 2.5vw, 1.5rem);
  --fs-xl: clamp(1.75rem, 4vw, 2.125rem);
  --fs-2xl: clamp(2rem, 5.5vw, 2.75rem);

  /* Layout */
  --radius: 12px;
  --radius-sm: 8px;
  --shadow-1: 0 1px 2px rgba(16,24,40,0.06), 0 1px 3px rgba(16,24,40,0.1);
  --shadow-2: 0 10px 20px rgba(16,24,40,0.08), 0 3px 6px rgba(16,24,40,0.08);

  /* Spacing scale */
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-5: 1.25rem;
  --space-6: 1.5rem;
  --space-8: 2rem;
  --space-10: 2.5rem;
  --space-12: 3rem;
  --space-16: 4rem;

  /* Components */
  --header-h: 64px; /* min height on small screens */
}

@media (prefers-color-scheme: light) {
  :root {
    --bg: #ffffff;
    --surface: #ffffff;
    --elev: #ffffff;
    --text: #0b1220;
    --muted: #5b6476;
    --border: #e7e9ee;
    --brand: #2563eb;
    --brand-strong: #2563eb;
    --brand-strong-hover: #1d4ed8;
    --brand-50: #eef2ff;
    --on-brand: #ffffff;
  }
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg: #0b0c0f;
    --surface: #0f1116;
    --elev: #131722;
    --text: #e7eef8;
    --muted: #a7b0c0;
    --border: #273046;
    /* In dark mode, keep accent bright for links but ensure solid brand is dark enough for contrast on white text */
    --brand: #8ab4ff;           /* accent/link */
    --brand-strong: #2b63d9;    /* solid button background — AA on white text */
    --brand-strong-hover: #1f4fb7;
    --brand-50: #0f1931;
    --on-brand: #ffffff;
    --shadow-1: 0 1px 2px rgba(3,6,12,0.5), 0 1px 3px rgba(3,6,12,0.35);
    --shadow-2: 0 10px 20px rgba(3,6,12,0.5), 0 3px 6px rgba(3,6,12,0.35);
  }
}

* { box-sizing: border-box; }
html { scroll-behavior: smooth; -webkit-text-size-adjust: 100%; }
@media (prefers-reduced-motion: reduce) {
  html { scroll-behavior: auto; }
}

body {
  margin: 0;
  font-family: var(--font-sans);
  font-size: var(--fs-base);
  line-height: 1.6;
  background: var(--bg);
  color: var(--text);
  text-rendering: optimizeLegibility;
}

h1, h2, h3 { line-height: 1.2; letter-spacing: -0.01em; }

img, svg { display: block; }
img { max-width: 100%; height: auto; }

.container {
  width: min(1120px, 100% - 2rem);
  margin-inline: auto;
}

/* Skip link */
.skip-link {
  position: absolute;
  left: -9999px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}
.skip-link:focus {
  position: fixed;
  left: 1rem;
  top: 1rem;
  width: auto;
  height: auto;
  padding: var(--space-3) var(--space-4);
  background: var(--elev);
  color: var(--text);
  border: 2px solid var(--brand);
  border-radius: var(--radius-sm);
  z-index: 10000;
}

/* Header */
.site-header {
  position: sticky;
  top: 0;
  inset-inline: 0;
  min-height: var(--header-h);
  background-color: var(--surface); /* fallback */
  background-color: color-mix(in oklab, var(--surface) 96%, transparent);
  border-bottom: 1px solid var(--border);
  z-index: 999;
}
.header-inner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-4);
  padding-block: var(--space-3);
}
.brand {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  color: var(--text);
  text-decoration: none;
  font-weight: 700;
  letter-spacing: 0.2px;
}
.brand-mark { font-size: 1.25rem; }
.brand-name { font-size: 1.0625rem; }

.site-nav .nav-list {
  display: flex;
  align-items: center;
  gap: clamp(0.5rem, 2.5vw, 1.25rem);
  list-style: none;
  margin: 0;
  padding: 0;
  flex-wrap: wrap; /* allow wrapping on tight viewports */
}
.site-nav .nav-list a {
  color: var(--text);
  text-decoration: none;
  font-size: var(--fs-sm);
  font-weight: 600; /* avoid font-weight change on active to prevent CLS */
}
.site-nav .nav-list a:hover { color: var(--brand); }
.site-nav .nav-list a[aria-current]:not(.btn) { color: var(--brand); text-underline-offset: 4px; text-decoration: underline; }
.site-nav .nav-list a.btn[aria-current] { color: var(--brand); border-color: var(--brand); border-color: color-mix(in oklab, var(--brand) 60%, var(--border)); }

/* Sections */
section { scroll-margin-top: var(--header-offset, calc(var(--header-h) + 16px)); }
.section-title { font-size: var(--fs-xl); margin: 0 0 var(--space-3); }
.section-lead { margin: 0 0 var(--space-8); color: var(--muted); font-size: var(--fs-md); }

/* Hero */
.hero {
  padding: var(--space-12) 0 var(--space-12);
  background-color: var(--surface);
  background-image: linear-gradient(180deg, color-mix(in oklab, var(--brand-50) 35%, transparent), transparent);
}
.hero-inner { text-align: center; }
.hero-title { font-size: var(--fs-2xl); margin: 0 0 var(--space-4); letter-spacing: -0.02em; }
.hero-sub { margin: 0 auto var(--space-8); max-width: 62ch; color: var(--muted); font-size: var(--fs-lg); }
.hero-ctas { display: inline-flex; gap: var(--space-4); align-items: center; flex-wrap: wrap; justify-content: center; }

/* Buttons */
.btn { display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem; padding: 0.75rem 1rem; border-radius: 999px; border: 1px solid transparent; font-weight: 600; text-decoration: none; cursor: pointer; white-space: nowrap; line-height: 1.2; }
.btn-small { padding: 0.5rem 0.75rem; font-size: var(--fs-sm); }
.btn-primary { background: var(--brand-strong); color: var(--on-brand); box-shadow: var(--shadow-1); }
.btn-primary:hover { background: var(--brand-strong-hover); }
.btn-secondary { background: transparent; border-color: var(--border); color: var(--text); }
.btn-secondary:hover { border-color: var(--brand); border-color: color-mix(in oklab, var(--brand) 60%, var(--border)); color: var(--brand); }

.link-secondary { color: var(--text); text-decoration: underline; text-underline-offset: 3px; }
.link-secondary:hover { color: var(--brand); }

/* Focus styles */
:where(a, button, input, textarea, select):focus-visible {
  outline: 2px solid var(--brand-strong);
  outline-offset: 2px;
}

/* High contrast preference */
@media (prefers-contrast: more) {
  :where(a, button, input, textarea, select):focus-visible { outline-width: 3px; }
  .btn-secondary { border-color: var(--brand); border-color: color-mix(in oklab, var(--brand) 70%, var(--border)); }
}

/* Cards */
.card { background: var(--elev); border: 1px solid var(--border); border-radius: var(--radius); padding: var(--space-6); box-shadow: var(--shadow-1); }

/* Features */
.features { padding: var(--space-12) 0; }
.feature-grid { display: grid; grid-template-columns: 1fr; gap: var(--space-6); }
.feature-card h3 { margin: var(--space-4) 0 var(--space-2); font-size: 1.125rem; }
.feature-card p { margin: 0; color: var(--muted); }

/* Pricing */
.pricing { padding: var(--space-12) 0; }
.pricing-grid { display: grid; grid-template-columns: 1fr; gap: var(--space-6); align-items: stretch; }
.plan-header { margin-bottom: var(--space-4); }
.plan-name { margin: 0 0 var(--space-2); font-size: 1.125rem; }
.plan-price { margin: 0; color: var(--text); }
.plan-price .price { font-weight: 800; font-size: 1.75rem; }
.plan-price .price-term { color: var(--muted); }
.plan-features { margin: 0 0 var(--space-6); padding-left: 1.25rem; color: var(--muted); }
.plan-popular { position: relative; border-color: var(--brand); border-color: color-mix(in oklab, var(--brand) 50%, var(--border)); box-shadow: var(--shadow-2); background: color-mix(in oklab, var(--brand-50) 60%, var(--elev)); }
.plan-popular .badge { position: absolute; top: -12px; left: 16px; background: var(--brand-strong); color: var(--on-brand); padding: 0.25rem 0.5rem; border-radius: 6px; font-size: 0.75rem; font-weight: 700; }

/* Testimonials */
.testimonials { padding: var(--space-12) 0; }
.testimonial-grid { display: grid; grid-template-columns: 1fr; gap: var(--space-6); }
.testimonial blockquote { margin: 0 0 var(--space-4); font-size: 1.0625rem; line-height: 1.6; }
.testimonial .author { font-weight: 700; }
.testimonial .meta { color: var(--muted); margin-left: 0.35rem; }

/* FAQ */
.faq { padding: var(--space-12) 0; }
.faq-item { border-bottom: 1px solid var(--border); padding: var(--space-4) 0; }
.faq-item:first-child { border-top: 1px solid var(--border); }
.faq-question { width: 100%; text-align: left; background: transparent; border: 0; padding: var(--space-3) 0; font-size: 1.0625rem; font-weight: 600; color: var(--text); display: flex; align-items: center; justify-content: space-between; gap: var(--space-4); cursor: pointer; }
.faq-question::after { content: "+"; font-weight: 700; color: var(--muted); }
.faq-question[aria-expanded="true"]::after { content: "–"; }
.faq-panel { padding: 0 0 var(--space-3); color: var(--muted); }

/* Contact */
.contact { padding: var(--space-12) 0; }
.contact-form { display: grid; gap: var(--space-4); max-width: 720px; }
.form-row { display: grid; gap: 0.5rem; }
label { font-weight: 600; }
input, textarea { width: 100%; padding: 0.75rem 0.875rem; border: 1px solid var(--border); border-radius: var(--radius-sm); background: var(--surface); color: var(--text); font: inherit; }
input::placeholder, textarea::placeholder { color: var(--muted); color: color-mix(in oklab, var(--muted) 70%, transparent); }
input:focus-visible, textarea:focus-visible { outline: 2px solid var(--brand-strong); outline-offset: 2px; }
.form-actions { display: flex; align-items: center; gap: var(--space-4); flex-wrap: wrap; }
.form-hint { margin: 0; color: var(--muted); font-size: var(--fs-sm); }

/* Footer */
.site-footer { padding: var(--space-10) 0; border-top: 1px solid var(--border); }
.footer-inner { display: grid; gap: var(--space-4); align-items: center; justify-items: start; }
.foot-brand { font-weight: 800; margin: 0; display: inline-flex; align-items: center; gap: 0.5rem; }
.foot-links { list-style: none; display: flex; gap: var(--space-4); padding: 0; margin: 0; flex-wrap: wrap; }
.foot-links a { color: var(--text); text-decoration: none; }
.foot-links a:hover { color: var(--brand); text-decoration: underline; text-underline-offset: 3px; }
.foot-copy { margin: 0; color: var(--muted); }

/* Utilities */
.visually-hidden { position: absolute !important; height: 1px; width: 1px; overflow: hidden; clip: rect(1px, 1px, 1px, 1px); white-space: nowrap; }

/* Responsive */
@media (min-width: 42rem) {
  .hero { padding: var(--space-16) 0; }
  .feature-grid { grid-template-columns: repeat(2, 1fr); }
  .pricing-grid { grid-template-columns: repeat(3, minmax(0, 1fr)); }
  .testimonial-grid { grid-template-columns: repeat(3, 1fr); }
  .footer-inner { grid-template-columns: 1fr auto; justify-content: space-between; align-items: center; }
  .site-nav .nav-list { flex-wrap: nowrap; }
}
@media (min-width: 64rem) {
  .feature-grid { grid-template-columns: repeat(3, 1fr); }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}
